{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pilat\\\\OneDrive\\\\Documents\\\\GitHub\\\\react\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { usePlaidLink } from \"react-plaid-link\";\nimport \"./App.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App(props) {\n  _s();\n  const [token, setToken] = useState(null);\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const onSuccess = useCallback(async publicToken => {\n    setLoading(true);\n    await fetch(\"/api/exchange_public_token\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        public_token: publicToken\n      })\n    });\n    await fetch(\"/api/create_processor_token\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        public_token: publicToken,\n        account_id: metadata.accounts[0].id\n      })\n    }).then(response => response.json()).then(data => {\n      const processorToken = data.processor_token;\n      // Use the processorToken as needed\n    }).catch(error => {\n      // handle error\n    });\n    await getBalance();\n  }, []);\n\n  // Creates a Link token\n  const createLinkToken = React.useCallback(async () => {\n    // For OAuth, use previously generated Link token\n    if (window.location.href.includes(\"?oauth_state_id=\")) {\n      const linkToken = localStorage.getItem('link_token');\n      setToken(linkToken);\n    } else {\n      const response = await fetch(\"/api/create_link_token\", {});\n      const data = await response.json();\n      setToken(data.link_token);\n      localStorage.setItem(\"link_token\", data.link_token);\n    }\n  }, [setToken]);\n\n  // Fetch balance data\n  const getBalance = React.useCallback(async () => {\n    setLoading(true);\n    const response = await fetch(\"/api/balance\", {});\n    const data = await response.json();\n    setData(data);\n    setLoading(false);\n  }, [setData, setLoading]);\n  let isOauth = false;\n  const config = {\n    token,\n    onSuccess\n  };\n\n  // For OAuth, configure the received redirect URI\n  if (window.location.href.includes(\"?oauth_state_id=\")) {\n    config.receivedRedirectUri = window.location.href;\n    isOauth = true;\n  }\n  const {\n    open,\n    ready\n  } = usePlaidLink(config);\n  useEffect(() => {\n    if (token == null) {\n      createLinkToken();\n    }\n    if (isOauth && ready) {\n      open();\n    }\n  }, [token, isOauth, ready, open]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => open(),\n      disabled: !ready,\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Link account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), !loading && data != null && Object.entries(data).map((entry, i) => /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: /*#__PURE__*/_jsxDEV(\"code\", {\n        children: JSON.stringify(entry[1], null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this)\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"n0NUqVt+TgDld2yb9Klifxgo0o0=\", false, function () {\n  return [usePlaidLink];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","usePlaidLink","jsxDEV","_jsxDEV","App","props","_s","token","setToken","data","setData","loading","setLoading","onSuccess","publicToken","fetch","method","headers","body","JSON","stringify","public_token","account_id","metadata","accounts","id","then","response","json","processorToken","processor_token","catch","error","getBalance","createLinkToken","window","location","href","includes","linkToken","localStorage","getItem","link_token","setItem","isOauth","config","receivedRedirectUri","open","ready","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","Object","entries","map","entry","i","_c","$RefreshReg$"],"sources":["C:/Users/pilat/OneDrive/Documents/GitHub/react/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { usePlaidLink } from \"react-plaid-link\";\nimport \"./App.scss\";\n\nfunction App(props) {\n  const [token, setToken] = useState(null);\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const onSuccess = useCallback(async (publicToken) => {\n    setLoading(true);\n    await fetch(\"/api/exchange_public_token\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ public_token: publicToken }),\n    });\n await fetch(\"/api/create_processor_token\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ public_token: publicToken, account_id: metadata.accounts[0].id }),\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      const processorToken = data.processor_token;\n      // Use the processorToken as needed\n    })\n    .catch((error) => {\n      // handle error\n    });\n    await getBalance();\n  }, []);\n\n  // Creates a Link token\n  const createLinkToken = React.useCallback(async () => {\n    // For OAuth, use previously generated Link token\n    if (window.location.href.includes(\"?oauth_state_id=\")) {\n      const linkToken = localStorage.getItem('link_token');\n      setToken(linkToken);\n    } else {\n      const response = await fetch(\"/api/create_link_token\", {});\n      const data = await response.json();\n      setToken(data.link_token);\n      localStorage.setItem(\"link_token\", data.link_token);\n    }\n  }, [setToken]);\n\n  // Fetch balance data\n  const getBalance = React.useCallback(async () => {\n    setLoading(true);\n    const response = await fetch(\"/api/balance\", {});\n    const data = await response.json();\n    setData(data);\n    setLoading(false);\n  }, [setData, setLoading]);\n\n  let isOauth = false;\n\n  const config = {\n    token,\n    onSuccess,\n  };\n\n  // For OAuth, configure the received redirect URI\n  if (window.location.href.includes(\"?oauth_state_id=\")) {\n    config.receivedRedirectUri = window.location.href;\n    isOauth = true;\n  }\n  const { open, ready } = usePlaidLink(config);\n\n  useEffect(() => {\n    if (token == null) {\n      createLinkToken();\n    }\n    if (isOauth && ready) {\n      open();\n    }\n  }, [token, isOauth, ready, open]);\n  \n  return (\n    <div>\n      <button onClick={() => open()\n        } disabled={!ready}>\n        <strong>Link account</strong>\n      </button>\n\n      {!loading &&\n        data != null &&\n        Object.entries(data).map((entry, i) => (\n          <pre key={i}>\n            <code>{JSON.stringify(entry[1], null, 2)}</code>\n          </pre>\n        )\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}