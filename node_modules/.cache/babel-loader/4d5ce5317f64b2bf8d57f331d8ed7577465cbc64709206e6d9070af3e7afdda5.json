{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pilat\\\\OneDrive\\\\Documents\\\\GitHub\\\\react\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { usePlaidLink } from \"react-plaid-link\";\nimport \"./App.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App(props) {\n  _s();\n  const [token, setToken] = useState(null);\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const onSuccess = useCallback(async (publicToken, metadata) => {\n    setLoading(true);\n    await fetch(\"/api/create_processor_token\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        public_token: publicToken,\n        account_id: metadata.accounts[0].id\n      })\n    }).then(response => response.json()).then(data => {\n      const processorToken = data.processor_token;\n      // Use the processorToken as needed\n    }).catch(error => {\n      // handle error\n    });\n    await getBalance();\n  }, []);\n\n  // Creates a Link token\n  const createLinkToken = React.useCallback(async () => {\n    // For OAuth, use previously generated Link token\n    if (window.location.href.includes(\"?oauth_state_id=\")) {\n      const linkToken = localStorage.getItem('link_token');\n      setToken(linkToken);\n    } else {\n      const response = await fetch(\"/api/create_link_token\", {\n        headers: {\n          \"Plaid-Version\": \"2020-09-14\",\n          \"PLAID-CLIENT-ID\": process.env.PLAID_CLIENT_ID,\n          \"PLAID-SECRET\": process.env.PLAID_SECRET\n        }\n      });\n      const data = await response.json();\n      setToken(data.link_token);\n      localStorage.setItem(\"link_token\", data.link_token);\n    }\n  }, [setToken]);\n\n  // Fetch balance data\n  const getBalance = React.useCallback(async () => {\n    setLoading(true);\n    const response = await fetch(\"/api/balance\", {});\n    const data = await response.json();\n    setData(data);\n    setLoading(false);\n  }, [setData, setLoading]);\n  let isOauth = false;\n  const config = {\n    token,\n    onSuccess\n  };\n\n  // For OAuth, configure the received redirect URI\n  if (window.location.href.includes(\"?oauth_state_id=\")) {\n    config.receivedRedirectUri = window.location.href;\n    isOauth = true;\n  }\n  const {\n    open,\n    ready\n  } = usePlaidLink(config);\n  useEffect(() => {\n    if (token == null) {\n      createLinkToken();\n    }\n    if (isOauth && ready) {\n      open();\n    }\n  }, [token, isOauth, ready, open]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => open(),\n      disabled: !ready,\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Link account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), !loading && data != null && Object.entries(data).map((entry, i) => /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: /*#__PURE__*/_jsxDEV(\"code\", {\n        children: JSON.stringify(entry[1], null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this)\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"n0NUqVt+TgDld2yb9Klifxgo0o0=\", false, function () {\n  return [usePlaidLink];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","usePlaidLink","jsxDEV","_jsxDEV","App","props","_s","token","setToken","data","setData","loading","setLoading","onSuccess","publicToken","metadata","fetch","method","headers","body","JSON","stringify","public_token","account_id","accounts","id","then","response","json","processorToken","processor_token","catch","error","getBalance","createLinkToken","window","location","href","includes","linkToken","localStorage","getItem","process","env","PLAID_CLIENT_ID","PLAID_SECRET","link_token","setItem","isOauth","config","receivedRedirectUri","open","ready","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","Object","entries","map","entry","i","_c","$RefreshReg$"],"sources":["C:/Users/pilat/OneDrive/Documents/GitHub/react/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { usePlaidLink } from \"react-plaid-link\";\nimport \"./App.scss\";\n\nfunction App(props) {\n  const [token, setToken] = useState(null);\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const onSuccess = useCallback(async (publicToken, metadata) => {\n  setLoading(true);\n\n  await fetch(\"/api/create_processor_token\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ public_token: publicToken, account_id: metadata.accounts[0].id }),\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      const processorToken = data.processor_token;\n      // Use the processorToken as needed\n    })\n    .catch((error) => {\n      // handle error\n    });\n\n  await getBalance();\n}, []);\n\n  // Creates a Link token\n  const createLinkToken = React.useCallback(async () => {\n    // For OAuth, use previously generated Link token\n    if (window.location.href.includes(\"?oauth_state_id=\")) {\n      const linkToken = localStorage.getItem('link_token');\n      setToken(linkToken);\n    } else {\n      const response = await fetch(\"/api/create_link_token\", {\n      headers: {\n        \"Plaid-Version\": \"2020-09-14\",\n        \"PLAID-CLIENT-ID\": process.env.PLAID_CLIENT_ID,\n        \"PLAID-SECRET\": process.env.PLAID_SECRET,\n      },\n    });\n      const data = await response.json();\n      setToken(data.link_token);\n      localStorage.setItem(\"link_token\", data.link_token);\n    }\n  }, [setToken]);\n\n\n  // Fetch balance data\n  const getBalance = React.useCallback(async () => {\n    setLoading(true);\n    const response = await fetch(\"/api/balance\", {});\n    const data = await response.json();\n    setData(data);\n    setLoading(false);\n  }, [setData, setLoading]);\n\n  let isOauth = false;\n\n  const config = {\n    token,\n    onSuccess,\n  };\n\n  // For OAuth, configure the received redirect URI\n  if (window.location.href.includes(\"?oauth_state_id=\")) {\n    config.receivedRedirectUri = window.location.href;\n    isOauth = true;\n  }\n  const { open, ready } = usePlaidLink(config);\n\n  useEffect(() => {\n    if (token == null) {\n      createLinkToken();\n    }\n    if (isOauth && ready) {\n      open();\n    }\n  }, [token, isOauth, ready, open]);\n  \n  return (\n    <div>\n      <button onClick={() => open()\n        } disabled={!ready}>\n        <strong>Link account</strong>\n      </button>\n\n      {!loading &&\n        data != null &&\n        Object.entries(data).map((entry, i) => (\n          <pre key={i}>\n            <code>{JSON.stringify(entry[1], null, 2)}</code>\n          </pre>\n        )\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}